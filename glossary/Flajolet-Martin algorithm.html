<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Flajolet-Martin algorithm</title>
	<link rel="stylesheet" href="/styles.css" />
</head>
<body>
<h1>Flajolet-Martin algorithm</h1>

<h2 id="flajolet-martin-simplified">Flajolet-Martin (simplified):</h2>
<ul>
<li>Choose <a
href="Hashing#Random%20hash%20functions|random%20hash%20function"></a>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>:</mo><mi>𝒰</mi><mo>→</mo><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">h: \mathcal{U} \rightarrow [0,1]</annotation></semantics></math>.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S = 1</annotation></semantics></math></li>
<li>For
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">i=1,…,n</annotation></semantics></math>:
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>→</mo><mo>min</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>S</mi><mo>,</mo><mi>h</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">S \rightarrow \min(S,h(x_i))</annotation></semantics></math></li>
</ul></li>
<li>return:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>D</mi><mo accent="true">̃</mo></mover><mo>=</mo><mfrac><mn>1</mn><mi>S</mi></mfrac><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\tilde{D} = \frac{1}{S}-1</annotation></semantics></math></li>
</ul>
<h2 id="lemma">Lemma:</h2>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
distinct items in our stream,
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝔼</mi><mrow><mo stretchy="true" form="prefix">[</mo><mi>S</mi><mo stretchy="true" form="postfix">]</mo></mrow><mo>=</mo><mfrac><mn>1</mn><mrow><mi>D</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\mathbb{E}[S] = \frac{1}{D+1}</annotation></semantics></math></p>
<h3 id="proof">proof:</h3>
<p>⚠️ add to notes here later</p>
<h2 id="lemma-1">Lemma:</h2>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">V</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">r</mi></mrow><mrow><mo stretchy="true" form="prefix">[</mo><mi>S</mi><mo stretchy="true" form="postfix">]</mo></mrow><mo>=</mo><mi>𝔼</mi><mrow><mo stretchy="true" form="prefix">[</mo><msup><mi>S</mi><mn>2</mn></msup><mo stretchy="true" form="postfix">]</mo></mrow><mo>−</mo><mi>𝔼</mi><msup><mrow><mo stretchy="true" form="prefix">[</mo><mi>S</mi><mo stretchy="true" form="postfix">]</mo></mrow><mn>2</mn></msup><mo>=</mo><mfrac><mn>2</mn><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><mo>+</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac><mo>−</mo><mfrac><mn>1</mn><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mfrac><mo>≤</mo><mfrac><mn>1</mn><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">\mathrm{Var}[S] = \mathbb{E}[S^2]-\mathbb{E}[S]^2 = \frac{2}{(D+1)(D+2)}-\frac{1}{(D+1)^2} \leq \frac{1}{(D+1)^2}</annotation></semantics></math></p>
<h3 id="proof-1">proof:</h3>
<p>⚠️ add to notes here later #incomplete</p>
<hr />
<p>References:</p>
<ul>
<li><a
href="https://en.wikipedia.org/wiki/Flajolet%E2%80%93Martin_algorithm">https://en.wikipedia.org/wiki/Flajolet%E2%80%93Martin_algorithm</a></li>
<li>P. Flajolet and G. Nigel Martin, “Probabilistic counting algorithms
for data base applications,” <em>Journal of Computer and System
Sciences</em>, vol. 31, no. 2, pp. 182–209, Oct. 1985, doi: <a
href="https://doi.org/10.1016/0022-0000(85)90041-8">10.1016/0022-0000(85)90041-8</a>.</li>
</ul>
</body>
</html>
